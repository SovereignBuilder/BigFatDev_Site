---
import Layout from "../../components/Layout.astro";
import { getCollection } from "astro:content";

const items = await getCollection("shop");
const sections = ["Software", "Games", "Art", "Services"] as const;
---

<Layout title="Shop" description="Software, games, art, and services." currentPath="/shop">
  <section class="content">
    <h1>Shop</h1>
    <p class="meta">Sections are explicit. Each card has a single Gumroad button.</p>
  </section>

  <section style="margin-top: 32px; display: grid; gap: 32px;">
    {sections.map((section) => (
      <div>
        <h2 class="section-title">{section}</h2>
        <div class="grid-3">
          {items
            .filter((item) => item.data.section === section)
            .map((item) => (
              <div class="card">
                <h3>{item.data.title}</h3>
                <p>{item.data.description}</p>
                <div style="margin-top: 16px;">
                  {item.data.url ? (
                    <a class="btn primary" href={item.data.url}>
                      Get it on Gumroad
                    </a>
                  ) : (
                    <span class="meta">Coming soon</span>
                  )}
                </div>
              </div>
            ))}
        </div>
      </div>
    ))}
  </section>
</Layout>
